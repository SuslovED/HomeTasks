# Unix Task 4 - Набор мини-команд на C

Этот проект реализует подмножество стандартных Unix-команд на языке C в рамках задания Task 4:

- `echo`
- `pwd`
- `ls`
- `ln`
- `wc`
- `cat`

Каждая команда собрана в отдельный исполняемый файл и повторяет базовое поведение одноименной утилиты Unix (в пределах требований задания).

---

## Структура проекта

task4/  
    echo.c  
    pwd.c  
    ls.c  
    ln.c  
    wc.c  
    cat.c  
    Makefile  
    README.md  

- `echo.c` - реализация команды `echo`
- `pwd.c` - реализация команды `pwd`
- `ls.c` - реализация команды `ls` с флагами `-R`, `-l`, `-g`
- `ln.c` - реализация команды `ln` с флагом `-s`
- `wc.c` - реализация команды `wc`
- `cat.c` - реализация команды `cat` с флагом `-n`
- `Makefile` - сборка всех шестерки программ

---

## Требования

- Unix-подобная система (Linux, macOS, WSL и т.п.)
- Компилятор C (`gcc` или `clang`)
- Поддержка стандарта C99

---

## Сборка

В корне проекта (папка `task4`):

    make

Будут собраны исполняемые файлы:

    echo  pwd  ls  ln  wc  cat

Собрать отдельную команду:

    make echo
    make ls

Очистить проект:

    make clean

Удаляются объектные файлы, бинарники и `deps.mk`.

---

## Краткое описание команд

### echo

Файл: `echo.c`  
Назначение: выводит свои аргументы через пробел.

Поддерживаемый флаг:

- `-n` - не печатать перевод строки в конце.

Примеры:

    ./echo hello world
    # hello world

    ./echo -n no_newline
    # no_newline%

---

### pwd

Файл: `pwd.c`  
Назначение: печатает абсолютный путь к текущему каталогу.

Используется функция `getcwd()`.

Пример:

    ./pwd
    # /Users/username/Desktop/3sem/task4

---

### ls

Файл: `ls.c`  
Назначение: вывод списка файлов каталога, опционально с атрибутами и рекурсией.

Поддерживаемые флаги:

- `-R` - рекурсивный вывод подкаталогов
- `-l` - длинный формат: тип, права, владелец, размер
- `-g` - дополнительно выводит имя группы (автоматически включает длинный формат)

Особенности реализации:

- Без аргументов: вывод содержимого текущего каталога (`.`).
- С аргументами: каждый путь трактуется как файл или каталог.
- Имена файлов в каталоге сортируются по алфавиту.
- В режиме `-l` строка содержит:
  - тип (`d`, `-`, `l`, `c`, `b`, `p`, `s`);
  - права доступа (`rwxrwxrwx` с учетом `setuid`, `setgid`, `sticky`);
  - имя владельца;
  - при `-g` имя группы;
  - размер файла в байтах;
  - имя файла;
  - для симлинков: `имя -> цель`.

Используемые системные функции:

- `opendir`, `readdir`, `closedir`
- `lstat`, `readlink`
- `getpwuid`, `getgrgid`

Примеры:

    ./ls
    ./ls -l
    ./ls -g
    ./ls -Rl
    ./ls ls.c pwd.c

---

### ln

Файл: `ln.c`  
Назначение: создание жестких и символических ссылок.

Синтаксис:

    ./ln existing_file new_link
    ./ln -s existing_file new_symlink

- Без `-s` используется `link()` - создается жесткая ссылка.
- С `-s` используется `symlink()` - создается символическая ссылка.

Примеры:

    ./ln file.txt file_hardlink
    ./ln -s file.txt file_symlink

При ошибке (`нет файла`, `нет прав`) используется `perror(filename)`.

---

### wc

Файл: `wc.c`  
Назначение: подсчет строк, слов и символов в файлах.

Формат вывода:

    filename num_lines num_words num_chars

Определения:

- строка - считается по символам `'\n'`;
- слово - последовательность непробельных символов, отделенная символами, для которых `isspace()` возвращает true;
- символы - общее количество прочитанных байтов.

Примеры:

    ./wc echo.c
    ./wc echo.c pwd.c ls.c

---

### cat

Файл: `cat.c`  
Назначение: вывод содержимого файлов или стандартного ввода.

Поддерживаемый флаг:

- `-n` - нумерация строк (нумерация общая по всем файлам).

Режимы работы:

- `./cat file1 file2` - выводит содержимое заданных файлов подряд;
- `./cat -n file1 file2` - выводит с номерами строк, например:

      1  первая строка file1
      2  вторая строка file1
      3  первая строка file2

- Без имен файлов (`./cat` или `./cat -n`) читает из `stdin`.

Примеры:

    ./cat echo.c
    ./cat -n echo.c pwd.c

    echo "hello" | ./cat
    echo "hello" | ./cat -n

---
